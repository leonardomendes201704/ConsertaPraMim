flowchart TD
    A[Prestador abre Minha Agenda] --> B[Carregar agendamentos]
    B --> C[Filtrar pendentes de confirmacao]
    C --> D[Ordenar por SLA de expiracao ascendente]
    D --> E[Renderizar inbox com risco/SLA e acoes rapidas]

    B --> F[Consolidar agendamentos por data local]
    F --> G[Montar calendario semanal]
    F --> H[Montar calendario mensal]
    G --> I[Alternar visualizacao por botao Semanal/Mensal]
    H --> I

    E --> J{Acao rapida}
    J -->|Confirmar| K[POST /ServiceRequests/ConfirmAppointment]
    K --> N[Atualizar status para confirmado]

    J -->|Recusar| L[POST /ServiceRequests/RejectAppointment]
    L --> O[Registrar motivo e status recusado]

    J -->|Propor novo horario| M[POST /ServiceRequests/RequestAppointmentReschedule]
    M --> P[Salvar janela proposta e motivo]

    N --> Q[Recarregar agenda com feedback]
    O --> Q
    P --> Q
